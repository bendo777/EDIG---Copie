<div class="contact-shell">
  <!-- Fond de quadrillage pour toute la page -->
  <div class="contact-shell__grid-background" aria-hidden="true"></div>
  
  <header class="site-header">
    <div class="site-header__inner">
      <a class="site-logo" routerLink="/bibliotheque">EDIG</a>
      <nav class="site-nav">
        <a class="site-nav__link" routerLink="/bibliotheque/collection">Catalogue</a>
        <a class="site-nav__link" routerLink="/bibliotheque/niveaux">Niveaux</a>
        <a class="site-nav__link" routerLink="/bibliotheque/nouveautes">Nouveautés</a>
        <a class="site-nav__link" routerLink="/bibliotheque/populaires">Populaires</a>
        <a class="site-nav__link" routerLink="/bibliotheque/a-propos">À propos</a>
        <a class="site-nav__link site-nav__link--active" routerLink="/bibliotheque/contact">Contacts</a>
      </nav>
      <div class="site-actions">
        <ng-container *ngIf="user; else noUser">
          <div class="site-profile" (click)="$event.stopPropagation(); toggleProfileMenu()" tabindex="0" role="button" aria-haspopup="true" [attr.aria-expanded]="showProfileMenu">
            <img
              class="site-profile__avatar"
              [src]="userAvatar"
              [alt]="userName"
              onerror="this.src='https://ui-avatars.com/api/?name='+encodeURIComponent(this.alt)+'&background=6366f1&color=fff&size=128'"
            />
            <div class="site-profile__info">
              <span class="site-profile__name">{{ userName }}</span>
              <span class="site-profile__email">{{ userEmail }}</span>
            </div>

            <div *ngIf="showProfileMenu" class="profile-menu" (click)="$event.stopPropagation()">
              <div class="profile-menu__header">
                <div class="profile-menu__avatar-wrap">
                  <img [src]="userAvatar" [alt]="userName" class="profile-menu__avatar" />
                </div>
                <div class="profile-menu__meta">
                  <div class="profile-menu__name">{{ userName }}</div>
                  <div class="profile-menu__email">{{ userEmail }}</div>
                </div>
              </div>
              <ul class="profile-menu__list">
                <li>
                  <a class="profile-menu__link" (click)="goToAccount()">
                    <i data-feather="user" class="w-4 h-4" aria-hidden="true"></i>
                    Mon compte
                  </a>
                </li>
                <li>
                  <button type="button" class="profile-menu__logout" (click)="logout()">
                    <i data-feather="log-out" class="w-4 h-4" aria-hidden="true"></i>
                    Se déconnecter
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </ng-container>
        <ng-template #noUser>
          <a routerLink="/login" class="site-actions__link">Se connecter</a>
          <a routerLink="/inscription" class="site-actions__cta">S'inscrire</a>
        </ng-template>
      </div>
    </div>
  </header>

  <main>
    <section class="contact-hero">
      <div class="contact-hero__inner">
        <div class="contact-hero__content">
          <p class="contact-hero__eyebrow">Nous rencontrer</p>
          <h1>Contactez EDIG et trouvons la meilleure dotation pour votre établissement.</h1>
          <p>
            Une question sur les collections, la formation de vos équipes ou l’accès aux ressources numériques ? Nos conseillers répondent en 24 h ouvrées.
          </p>
          <div class="contact-hero__cta">
            <a href="tel:+24101456789" class="btn btn--primary">
              <i data-feather="phone-call" class="w-4 h-4"></i>
              +241 01 45 67 89
            </a>
            <a routerLink="/bibliotheque/collection" class="btn btn--ghost">Voir les manuels</a>
          </div>
        </div>
        <div class="contact-hero__visual">
          <img [src]="mapImageUrl" alt="Localisation EDIG Libreville" class="contact-hero__map" />
          <div class="contact-hero__badge">
            <i data-feather="map-pin" class="w-4 h-4"></i>
            Libreville · Boulevard Triomphal
          </div>
        </div>
      </div>
    </section>

    <section class="contact-channels">
      <div class="section-header">
        <span class="section-eyebrow">Canaux dédiés</span>
        <h2>Choisissez le contact qui correspond à votre besoin.</h2>
        <p>Nous coordonnons chaque demande avec les équipes pédagogiques et logistiques adéquates.</p>
      </div>
      <div class="channel-grid">
        <article *ngFor="let channel of contactChannels" class="channel-card">
          <div class="channel-card__icon">
            <i [attr.data-feather]="channel.icon" class="w-5 h-5" aria-hidden="true"></i>
          </div>
          <h3>{{ channel.title }}</h3>
          <p>{{ channel.description }}</p>
          <a class="channel-card__action" [href]="channel.actionHref" target="_blank" rel="noopener">
            <span>{{ channel.actionLabel }}</span>
            <strong>{{ channel.actionValue }}</strong>
          </a>
        </article>
      </div>
    </section>

    <section class="contact-offices">
      <div class="section-header">
        <span class="section-eyebrow">Nos antennes</span>
        <h2>Des équipes proches de vos classes partout au Gabon.</h2>
        <p>Chaque antenne propose des démonstrations de manuels, des prêts d’exemplaires et un suivi logistique.</p>
      </div>
      <div class="office-grid">
        <article *ngFor="let office of officeLocations" class="office-card">
          <h3>{{ office.city }}</h3>
          <p class="office-card__address">{{ office.address }}</p>
          <p class="office-card__schedule">{{ office.schedule }}</p>
          <a class="office-card__contact" [href]="toTelLink(office.contact)">
            <i data-feather="phone" class="w-4 h-4"></i>
            {{ office.contact }}
          </a>
        </article>
      </div>
    </section>

    <section class="contact-map">
      <div class="contact-map__content">
        <h2>Localisation principale</h2>
        <p>Immeuble EDICEF · Boulevard Triomphal, Libreville. Accueil visiteurs du lundi au vendredi.</p>
        <ul class="contact-map__details">
          <li>
            <i data-feather="clock" class="w-4 h-4"></i>
            8h30 - 12h30 / 14h - 17h30
          </li>
          <li>
            <i data-feather="mail" class="w-4 h-4"></i>
            bonjour@edig.ga
          </li>
          <li>
            <i data-feather="navigation" class="w-4 h-4"></i>
            Parking visiteurs libre
          </li>
        </ul>
      </div>
      <div class="contact-map__image">
        <img [src]="mapImageUrl" alt="Carte EDIG Libreville" />
      </div>
    </section>

    <section class="contact-support">
      <div class="section-header">
        <span class="section-eyebrow">Accompagnement</span>
        <h2>Comment se passe votre projet avec EDIG ?</h2>
      </div>
      <div class="support-steps">
        <article *ngFor="let step of supportSteps" class="support-card">
          <span class="support-card__step">{{ step.step }}</span>
          <h3>{{ step.title }}</h3>
          <p>{{ step.detail }}</p>
        </article>
      </div>
    </section>

    <section class="contact-form">
      <div class="contact-form__content">
        <h2>Écrivez-nous</h2>
        <p>Décrivez votre besoin, nous répondons sous 24 h ouvrées avec un plan d’action personnalisé.</p>
      </div>
      <form class="contact-form__fields">
        <label>
          <span>Nom complet</span>
          <input type="text" placeholder="Nom et prénom" required />
        </label>
        <label>
          <span>Email professionnel</span>
          <input type="email" placeholder="prenom.nom@etablissement.ga" required />
        </label>
        <label>
          <span>Établissement / Fonction</span>
          <input type="text" placeholder="Collège Mbandja · Responsable pédagogique" />
        </label>
        <label>
          <span>Message</span>
          <textarea rows="4" placeholder="Précisez le cycle, le volume souhaité et vos délais."></textarea>
        </label>
        <button type="submit" class="btn btn--primary">Envoyer la demande</button>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <div class="site-footer__inner">
      <div class="site-footer__brand">
        <a class="site-logo" routerLink="/bibliotheque">EDIG</a>
        <p>
          EDIG · édicef — Institut Pédagogique National<br>
          Votre partenaire pour l'éducation et les ressources pédagogiques de qualité.
        </p>
        <div class="site-footer__school-icons">
          <div class="school-icon" title="Manuels scolaires">
            <i data-feather="book" class="w-5 h-5 text-amber-400"></i>
          </div>
          <div class="school-icon" title="Cahiers d'exercices">
            <i data-feather="edit-3" class="w-5 h-5 text-sky-400"></i>
          </div>
          <div class="school-icon" title="Ressources numériques">
            <i data-feather="monitor" class="w-5 h-5 text-indigo-400"></i>
          </div>
          <div class="school-icon" title="Guides pédagogiques">
            <i data-feather="compass" class="w-5 h-5 text-emerald-400"></i>
          </div>
        </div>
      </div>
      
      <div class="site-footer__section">
        <h3 class="site-footer__section-title">
          <i data-feather="book-open" class="w-4 h-4"></i>
          Navigation
        </h3>
        <div class="site-footer__links">
          <a routerLink="/bibliotheque/collection">Collection complète</a>
          <a routerLink="/bibliotheque/niveaux">Niveaux scolaires</a>
          <a routerLink="/bibliotheque/nouveautes">Nouveautés</a>
          <a routerLink="/bibliotheque/populaires">Populaires</a>
          <a routerLink="/bibliotheque/a-propos">À propos</a>
          <a routerLink="/bibliotheque/contact">Contacts</a>
        </div>
      </div>
      
      <div class="site-footer__section">
        <h3 class="site-footer__section-title">
          <i data-feather="share-2" class="w-4 h-4"></i>
          Suivez-nous
        </h3>
        <div class="site-footer__socials">
          <a href="https://www.facebook.com" target="_blank" rel="noopener">
            <i data-feather="facebook" class="w-4 h-4"></i>
            Facebook
          </a>
          <a href="https://www.instagram.com" target="_blank" rel="noopener">
            <i data-feather="instagram" class="w-4 h-4"></i>
            Instagram
          </a>
          <a href="https://www.youtube.com" target="_blank" rel="noopener">
            <i data-feather="youtube" class="w-4 h-4"></i>
            YouTube
          </a>
          <a href="https://twitter.com" target="_blank" rel="noopener">
            <i data-feather="twitter" class="w-4 h-4"></i>
            Twitter
          </a>
        </div>
      </div>
    </div>
    
    <div class="site-footer__bottom">
      <p>&copy; {{ currentYear }} EDIG - Tous droits réservés | Institut Pédagogique National du Gabon</p>
    </div>
  </footer>
</div>


