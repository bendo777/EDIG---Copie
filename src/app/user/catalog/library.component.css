:host {
  display: block;
}

/* Header styles copied from home.component.css to ensure identical header design */
.site-header {
  position: sticky;
  top: 0;
  z-index: 30;
  background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 30%, #7dd3fc 60%, #bae6fd 90%, #e0f2fe 100%);
  backdrop-filter: blur(20px);
  border-bottom: 3px solid rgba(14, 165, 233, 0.4);
  box-shadow: 0 8px 24px rgba(14, 165, 233, 0.2), 0 2px 8px rgba(14, 165, 233, 0.15);
  transition: all 0.3s ease;
}

.site-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #0ea5e9 0%, #38bdf8 25%, #6366f1 50%, #8b5cf6 75%, #0ea5e9 100%);
  background-size: 200% 100%;
  animation: headerGradient 8s linear infinite;
}

@keyframes headerGradient {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

.site-header__inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1.25rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 2rem;
  position: relative;
  z-index: 1;
}

.site-logo {
  font-size: 1.75rem;
  font-weight: 900;
  letter-spacing: 0.1em;
  background: linear-gradient(135deg, #0369a1, #0c4a6e);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-decoration: none;
  transition: transform 0.3s ease;
  filter: drop-shadow(0 2px 4px rgba(3, 105, 161, 0.3));
  flex-shrink: 0;
  white-space: nowrap;
}

.site-logo:hover {
  transform: scale(1.05);
  filter: drop-shadow(0 4px 8px rgba(3, 105, 161, 0.4));
}

.site-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
  flex: 1;
  max-width: 600px;
  margin: 0 auto;
}

.site-nav__link {
  font-size: 0.95rem;
  font-weight: 600;
  color: #0c4a6e;
  text-decoration: none;
  transition: all 0.3s ease;
  padding: 0.6rem 1rem;
  border-radius: 0.6rem;
  position: relative;
  background: rgba(255, 255, 255, 0.4);
  border: 1px solid rgba(14, 165, 233, 0.2);
  box-shadow: 0 2px 4px rgba(14, 165, 233, 0.1);
}

.site-nav__link::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 3px;
  background: linear-gradient(90deg, #0369a1, #0c4a6e);
  transition: all 0.3s ease;
  transform: translateX(-50%);
  border-radius: 2px;
}

.site-nav__link:hover {
  color: #ffffff;
  background: linear-gradient(135deg, #0ea5e9, #0284c7);
  border-color: #0284c7;
  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
  transform: translateY(-2px);
}

.site-nav__link:hover::after {
  width: 0;
}

.site-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-shrink: 0;
  margin-left: auto;
}

.site-actions__link {
  font-size: 0.95rem;
  font-weight: 600;
  color: #0c4a6e;
  text-decoration: none;
  padding: 0.65rem 1.4rem;
  border-radius: 0.6rem;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.6);
  border: 1.5px solid rgba(14, 165, 233, 0.35);
  box-shadow: 0 2px 6px rgba(14, 165, 233, 0.15);
  white-space: nowrap;
}

.site-actions__link:hover {
  color: #ffffff;
  background: linear-gradient(135deg, #0284c7, #0369a1);
  border-color: #0369a1;
  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.35);
  transform: translateY(-2px);
}

.site-actions__cta {
  display: inline-flex;
  align-items: center;
  padding: 0.75rem 1.75rem;
  border-radius: 999px;
  background: linear-gradient(135deg, #0369a1, #0c4a6e);
  color: #ffffff;
  font-weight: 700;
  font-size: 0.95rem;
  text-decoration: none;
  transition: all 0.3s ease;
  box-shadow: 0 6px 16px rgba(3, 105, 161, 0.4), 0 2px 4px rgba(3, 105, 161, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  white-space: nowrap;
}

.site-actions__cta:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(3, 105, 161, 0.5), 0 4px 8px rgba(3, 105, 161, 0.3);
  background: linear-gradient(135deg, #0c4a6e, #075985);
}

.line-clamp-2,
.line-clamp-3 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  -webkit-line-clamp: 3;
}

/* Animated search icon */
.relative span[class*="absolute"] i[data-feather="search"] {
  animation: searchPulse 2s ease-in-out infinite;
}

@keyframes searchPulse {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

/* Badge enhancements */
span[class*="rounded-full"][class*="bg-indigo-50"],
span[class*="rounded-full"][class*="bg-emerald-50"],
span[class*="rounded-full"][class*="bg-amber-500"],
span[class*="rounded-full"][class*="bg-emerald-500"] {
  transition: all 0.3s ease;
  cursor: default;
}

span[class*="rounded-full"][class*="bg-indigo-50"]:hover {
  background-color: rgba(99, 102, 241, 0.15) !important;
  transform: scale(1.05);
}

span[class*="rounded-full"][class*="bg-emerald-50"]:hover {
  background-color: rgba(16, 185, 129, 0.15) !important;
  transform: scale(1.05);
}

/* Manual card image effects */
article.group img {
  transition: all 0.4s ease;
}

article.group:hover img {
  transform: scale(1.05);
}

/* Loading skeleton animations */
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.animate-pulse {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    90deg,
    #f1f5f9 0%,
    #e2e8f0 20%,
    #f1f5f9 40%,
    #f1f5f9 100%
  );
  background-size: 1000px 100%;
}

:host ::ng-deep .manual-modal {
  z-index: 50;
}

:host ::ng-deep .manual-modal__dialog {
  max-width: 720px;
}

/* Header profile styles (matching home.component.css) */
.site-profile {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.4rem 0.9rem;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.7);
  border: 2px solid rgba(14, 165, 233, 0.3);
  transition: all 0.3s ease;
  position: relative;
  box-shadow: 0 2px 8px rgba(14, 165, 233, 0.15);
  backdrop-filter: blur(10px);
}

.site-profile:hover {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(14, 165, 233, 0.5);
  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.25);
  transform: translateY(-1px);
}

.site-profile__avatar {
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  object-fit: cover;
  border: 2px solid rgba(99, 102, 241, 0.2);
}

.site-profile__info {
  display: flex;
  flex-direction: column;
}

.site-profile__name {
  font-size: 0.875rem;
  font-weight: 600;
  color: #1f2937;
  line-height: 1.2;
}

/* Profile dropdown */
.profile-menu {
  position: absolute;
  right: 0;
  top: calc(100% + 0.6rem);
  width: 18.5rem;
  background: #ffffff;
  border: 1px solid rgba(15, 23, 42, 0.06);
  border-radius: 0.75rem;
  box-shadow: 0 18px 40px rgba(2,6,23,0.12);
  overflow: hidden;
  z-index: 50;
}
.profile-menu__header {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  padding: 0.9rem;
  border-bottom: 1px solid rgba(15, 23, 42, 0.03);
}
.profile-menu__avatar {
  width: 3rem;
  height: 3rem;
  border-radius: 999px;
  object-fit: cover;
  border: 1px solid rgba(148,163,184,0.12);
}
.profile-menu__meta { font-size: 0.9rem; }
.profile-menu__name { font-weight: 700; color: #0f172a; }
.profile-menu__email { font-size: 0.85rem; color: #64748b; }
.profile-menu__list { list-style: none; margin: 0; padding: 0.6rem; display: grid; gap: 0.4rem; }
.profile-menu__link {
  display: flex; align-items: center; gap: 0.6rem; text-decoration: none; color: #0f172a; padding: 0.55rem 0.7rem; border-radius: 0.5rem; font-weight:600;
}
.profile-menu__link:hover { background: rgba(14,165,233,0.06); color: #0369a1; }
.profile-menu__logout { width: 100%; text-align: left; display:flex; gap:0.6rem; align-items:center; padding:0.55rem 0.7rem; border-radius:0.5rem; border:none; background:transparent; color:#ef4444; font-weight:700; cursor:pointer; }
.profile-menu__logout:hover { background: rgba(239,68,68,0.06); }

/* Hero styles copied from home.component.css to match home page design */
.hero {
  position: relative;
  padding: clamp(4rem, 8vw, 6.5rem) 1.5rem 5rem;
  overflow: hidden;
}

.hero__inner {
  max-width: 1160px;
  margin: 0 auto;
  display: grid;
  gap: clamp(2rem, 6vw, 5rem);
  align-items: center;
}

@media (min-width: 960px) {
  .hero__inner {
    grid-template-columns: 1.05fr 0.95fr;
  }
}

.hero__content h1 {
  font-size: clamp(2.4rem, 4vw, 3.5rem);
  line-height: 1.1;
  color: #0f172a;
}

.hero__content p {
  margin-top: 1.5rem;
  font-size: 1.05rem;
  line-height: 1.7;
  color: #475569;
  max-width: 32rem;
}

.hero__levels {
  margin-top: 1.75rem;
  display: inline-flex;
  gap: 0.75rem;
  padding: 0.5rem;
  background: rgba(255, 255, 255, 0.75);
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.2);
  box-shadow: 0 10px 25px -20px rgba(15, 23, 42, 0.4);
}

.hero__level {
  padding: 0.55rem 1.4rem;
  border-radius: 999px;
  border: none;
  background: transparent;
  font-weight: 600;
  font-size: 0.95rem;
  color: #475569;
  cursor: pointer;
  transition: background 0.3s, color 0.3s, box-shadow 0.3s;
}

.hero__level--active {
  background: #0ea5e9;
  color: #ffffff;
  box-shadow: 0 12px 24px -12px rgba(14, 165, 233, 0.7);
}

.hero__cta {
  margin-top: 2.5rem;
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.8rem 1.6rem;
  border-radius: 999px;
  font-weight: 600;
  text-decoration: none;
  transition: transform 0.3s, box-shadow 0.3s, background 0.3s, color 0.3s;
}

.btn--primary { background: #0ea5e9; color: white; }
.btn--outline { border: 1px solid rgba(15,23,42,0.06); background: transparent; color: #0f172a; }

.hero__visual { display:flex; align-items:center; justify-content:center; }
.collage { position: relative; width: 320px; height: 320px; }
.collage__photo { position: absolute; background-size: cover; background-position: center; border-radius: 0.75rem; }
.collage__photo--main { width: 220px; height: 220px; left: 30px; top: 20px; background-color:#e2e8f0; }
.collage__photo--secondary { width: 140px; height: 140px; right: 10px; bottom: 10px; background-color:#f8fafc; }
.collage__card { position: absolute; left: 40px; bottom: -6px; background: white; padding: 1rem; border-radius: 0.75rem; box-shadow: 0 8px 20px rgba(2,6,23,0.08); }
.collage__scribble { position:absolute; width:36px; height:36px; }
.collage__scribble--heart { left: 0; top: 0; }
.collage__scribble--star { right: 0; top: 0; }

/* Enhanced Footer with school theme - matching bibliothèque page design */
.site-footer {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%);
  color: #e2e8f0;
  padding: 3.5rem 1.5rem 2rem;
  margin-top: 4rem;
  position: relative;
  overflow: hidden;
}

.site-footer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 25%, #38bdf8 50%, #6366f1 75%, #f97316 100%);
}

.site-footer::after {
  content: '';
  position: absolute;
  top: -50px;
  right: -50px;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(99,102,241,0.15) 0%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}

.site-footer__inner {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  gap: 2.5rem;
  position: relative;
  z-index: 1;
}

@media (min-width: 768px) {
  .site-footer__inner {
    grid-template-columns: 1.5fr 1fr 1fr;
    gap: 3rem;
  }
}

.site-footer__brand {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.site-footer__brand .site-logo {
  font-size: 1.8rem;
  color: #ffffff;
  font-weight: 800;
  letter-spacing: 0.1em;
  background: linear-gradient(135deg, #38bdf8, #6366f1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.site-footer__brand p {
  color: #cbd5e1;
  font-size: 0.95rem;
  line-height: 1.6;
  max-width: 320px;
}

.site-footer__section-title {
  font-size: 1rem;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 1.2rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.site-footer__section-title i {
  width: 18px;
  height: 18px;
  stroke-width: 2;
  color: #38bdf8;
  stroke: currentColor;
  fill: none;
  display: inline-block;
  vertical-align: middle;
}

.site-footer__links,
.site-footer__socials {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.site-footer__links a,
.site-footer__socials a {
  color: #cbd5e1;
  font-weight: 500;
  text-decoration: none;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  position: relative;
}

.site-footer__links a i,
.site-footer__socials a i {
  width: 18px;
  height: 18px;
  stroke-width: 2;
  transition: all 0.3s ease;
  color: #cbd5e1;
  stroke: currentColor;
  fill: none;
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.5rem;
}

.site-footer__links a:hover,
.site-footer__socials a:hover {
  color: #38bdf8;
  background: rgba(56, 189, 248, 0.1);
  transform: translateX(5px);
}

.site-footer__links a:hover i,
.site-footer__socials a:hover i {
  color: #38bdf8;
  transform: scale(1.15);
}

.site-footer__links a::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 0;
  background: linear-gradient(180deg, #38bdf8, #6366f1);
  border-radius: 0 2px 2px 0;
  transition: height 0.3s ease;
}

.site-footer__links a:hover::before {
  height: 60%;
}

.site-footer__bottom {
  margin-top: 2.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(148, 163, 184, 0.2);
  text-align: center;
  color: #94a3b8;
  font-size: 0.85rem;
}

.site-footer__school-icons {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}

.school-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
  cursor: pointer;
}

.school-icon i {
  width: 24px;
  height: 24px;
  stroke-width: 2;
  stroke: currentColor;
  fill: none;
  display: block;
}

.school-icon:hover {
  background: rgba(99, 102, 241, 0.15);
  border-color: rgba(99, 102, 241, 0.3);
  transform: translateY(-3px);
}

/* Layout helpers for collection page to pin footer to bottom */
.collection-shell {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 5%, #f9fafb 20%, #f8fafc 100%);
  position: relative;
  overflow-x: hidden;
}

.collection-content {
  flex: 1 1 auto;
  display: block;
  position: relative;
  z-index: 1;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(1px);
  min-height: calc(100vh - 200px);
}

/* Ensure all content inside appears above grid */
.collection-content > * {
  position: relative;
  z-index: 2;
}

/* School-themed decorative motifs in empty spaces */
.collection-school-motif {
  position: absolute;
  pointer-events: none;
  z-index: 1;
  opacity: 0.5;
  filter: drop-shadow(0 4px 8px rgba(15, 23, 42, 0.1));
  animation: collectionFloat 10s ease-in-out infinite;
}

.collection-school-motif--book {
  width: 60px;
  height: 80px;
  top: 20%;
  right: 2%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='100' viewBox='0 0 80 100'><rect x='5' y='5' width='70' height='90' rx='3' fill='%23fef3c7' stroke='%23f59e0b' stroke-width='1.5'/><line x1='8' y1='25' x2='72' y2='25' stroke='%23f59e0b' stroke-width='1' opacity='0.4'/><line x1='8' y1='45' x2='72' y2='45' stroke='%23f59e0b' stroke-width='1' opacity='0.4'/><line x1='8' y1='65' x2='72' y2='65' stroke='%23f59e0b' stroke-width='1' opacity='0.4'/><circle cx='18' cy='15' r='2.5' fill='%23f59e0b'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  animation-delay: 0s;
  transform: rotate(-8deg);
}

.collection-school-motif--calculator {
  width: 50px;
  height: 60px;
  top: 60%;
  right: 1%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='60' height='75' viewBox='0 0 60 75'><rect x='4' y='4' width='52' height='67' rx='3' fill='%23e5e7eb' stroke='%23374151' stroke-width='1.5'/><rect x='6' y='6' width='48' height='18' rx='2' fill='%23f3f4f6' stroke='%23374151' stroke-width='1'/><rect x='8' y='28' width='10' height='10' rx='1' fill='%23ffffff' stroke='%23374151' stroke-width='0.8'/><rect x='20' y='28' width='10' height='10' rx='1' fill='%23ffffff' stroke='%23374151' stroke-width='0.8'/><rect x='32' y='28' width='10' height='10' rx='1' fill='%23fef3c7' stroke='%23f59e0b' stroke-width='0.8'/><rect x='44' y='28' width='10' height='10' rx='1' fill='%23fef3c7' stroke='%23f59e0b' stroke-width='0.8'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  animation-delay: 2s;
  transform: rotate(12deg);
}

.collection-school-motif--compass {
  width: 55px;
  height: 55px;
  bottom: 30%;
  left: 1%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='70' height='70' viewBox='0 0 70 70'><circle cx='35' cy='35' r='30' fill='none' stroke='%23f97316' stroke-width='2'/><circle cx='35' cy='35' r='2' fill='%23f97316'/><line x1='35' y1='5' x2='35' y2='35' stroke='%23f97316' stroke-width='1.5'/><line x1='35' y1='35' x2='58' y2='58' stroke='%23f97316' stroke-width='1.5'/><line x1='35' y1='35' x2='12' y2='58' stroke='%23f97316' stroke-width='1.5'/><circle cx='35' cy='5' r='3' fill='%23f59e0b'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  animation-delay: 1s;
  transform: rotate(-15deg);
}

.collection-school-motif--star {
  width: 45px;
  height: 45px;
  top: 45%;
  left: 0.5%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'><polygon points='30,8 35,25 52,25 38,35 43,52 30,42 17,52 22,35 8,25 25,25' fill='%23fbbf24' stroke='%23f59e0b' stroke-width='1.5' opacity='0.8'/><circle cx='30' cy='30' r='4' fill='%23fef3c7'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  animation-delay: 3s;
  transform: rotate(20deg);
}

.collection-school-motif--pen {
  width: 80px;
  height: 12px;
  bottom: 20%;
  left: 2%;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='24' viewBox='0 0 160 24'><polygon points='0,12 20,5 20,19' fill='%23f59e0b'/><rect x='20' y='6' width='120' height='12' fill='%23fbbf24'/><rect x='40' y='6' width='90' height='12' fill='%23fde68a' opacity='0.4'/><rect x='140' y='6' width='10' height='12' fill='%233f3f46'/><circle cx='145' cy='12' r='2' fill='%23fef3c7'/></svg>");
  background-size: contain;
  background-repeat: no-repeat;
  animation-delay: 1.5s;
  transform: rotate(-18deg);
}

@keyframes collectionFloat {
  0%, 100% {
    transform: translateY(0) rotate(var(--rotate, 0deg));
  }
  50% {
    transform: translateY(-10px) rotate(calc(var(--rotate, 0deg) + 2deg));
  }
}

.collection-school-motif--book {
  --rotate: -8deg;
}

.collection-school-motif--calculator {
  --rotate: 12deg;
}

.collection-school-motif--compass {
  --rotate: -15deg;
}

.collection-school-motif--star {
  --rotate: 20deg;
}

.collection-school-motif--pen {
  --rotate: -18deg;
}

/* Enhanced notebook grid pattern background with school theme - only on content, not footer */
.collection-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    /* Main grid lines - more visible */
    linear-gradient(to right, rgba(148, 163, 184, 0.25) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(148, 163, 184, 0.25) 1px, transparent 1px),
    /* Thicker horizontal lines every 4 rows (like school notebook) */
    linear-gradient(to bottom, transparent 0px, transparent 119px, rgba(148, 163, 184, 0.4) 120px, rgba(148, 163, 184, 0.4) 121px, transparent 122px),
    /* Left margin line (red like school notebook) */
    linear-gradient(to right, rgba(239, 68, 68, 0.4) 0px, rgba(239, 68, 68, 0.4) 3px, transparent 3px),
    /* Vertical lines for math paper effect */
    linear-gradient(to right, rgba(148, 163, 184, 0.2) 0px, rgba(148, 163, 184, 0.2) 1px, transparent 1px);
  background-size: 
    20px 20px,
    20px 20px,
    20px 120px,
    100% 100%,
    20px 20px;
  background-position: 
    0 0,
    0 0,
    0 0,
    0 0,
    0 0;
  opacity: 0.85;
  pointer-events: none;
  z-index: 0;
}

/* Additional school pattern overlay with decorative elements */
.collection-content::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    /* Paper texture effect */
    repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.05) 0px,
      transparent 1px,
      transparent 2px,
      rgba(255, 255, 255, 0.05) 3px
    ),
    /* Decorative corner patterns - school themed */
    radial-gradient(circle at 3% 3%, rgba(251, 191, 36, 0.12) 0%, transparent 40%),
    radial-gradient(circle at 97% 97%, rgba(56, 189, 248, 0.12) 0%, transparent 40%),
    radial-gradient(circle at 50% 5%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 10% 90%, rgba(16, 185, 129, 0.08) 0%, transparent 40%),
    radial-gradient(circle at 90% 10%, rgba(245, 158, 11, 0.08) 0%, transparent 40%),
    /* Subtle diagonal lines pattern (like ruled paper) */
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 80px,
      rgba(148, 163, 184, 0.05) 80px,
      rgba(148, 163, 184, 0.05) 82px
    ),
    /* Horizontal writing lines effect */
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 19px,
      rgba(148, 163, 184, 0.08) 20px,
      rgba(148, 163, 184, 0.08) 21px
    ),
    /* Decorative school icons pattern (subtle) */
    url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg opacity='0.03'%3E%3Cpath d='M20 20 L30 15 L40 20 L40 30 L20 30 Z' fill='%2338bdf8'/%3E%3Ccircle cx='30' cy='25' r='2' fill='%23fbbf24'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 
    100% 100%,
    100% 100%,
    100% 100%,
    100% 100%,
    100% 100%,
    100% 100%,
    100% 100%,
    200px 200px;
  pointer-events: none;
  z-index: 0;
}

/* Ensure header doesn't show grid pattern */
.site-header {
  position: relative;
  z-index: 30;
  background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 30%, #7dd3fc 60%, #bae6fd 90%, #e0f2fe 100%) !important;
}

/* Ensure footer doesn't have grid pattern - override any background patterns */
/* Footer already has black background from Enhanced Footer section above */
.site-footer {
  position: relative;
  z-index: 10;
  /* Keep the black gradient background - same as bibliothèque page */
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%) !important;
  /* Ensure no grid patterns show through */
  background-image: none;
}

/* Footer decorative elements are already defined in Enhanced Footer section above */
.site-footer::before {
  z-index: 1;
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 25%, #38bdf8 50%, #6366f1 75%, #f97316 100%);
}

.site-footer::after {
  z-index: 1;
  content: '';
  position: absolute;
  top: -50px;
  right: -50px;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(99,102,241,0.15) 0%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}

/* Levels page visuals with enhanced school theme */
.levels-hero {
  padding: clamp(3rem, 6vw, 4.5rem) 1.5rem 3rem;
  position: relative;
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 15%, #f9fafb 35%, #fff 100%);
  overflow: visible;
}

.levels-hero::before {
  content: '';
  position: absolute;
  top: 20px;
  left: 0;
  width: 100%;
  height: 3px;
  background: repeating-linear-gradient(
    90deg,
    #e2e8f0 0px,
    #e2e8f0 2px,
    transparent 2px,
    transparent 10px
  );
  opacity: 0.5;
}

.levels-hero__inner {
  max-width: 1140px;
  margin: 0 auto;
  display: grid;
  gap: 3rem;
  align-items: center;
  position: relative;
}

@media (min-width: 960px) {
  .levels-hero__inner {
    grid-template-columns: 1.05fr 0.95fr;
  }
}

.levels-hero__visual {
  position: relative;
  min-height: 20rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.levels-hero__decor { 
  position: absolute; 
  background-repeat: no-repeat; 
  background-size: contain; 
  opacity: 0.75; 
  filter: drop-shadow(0 8px 22px rgba(15,23,42,0.3)); 
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(var(--rotate, 0deg)); }
  50% { transform: translateY(-10px) rotate(var(--rotate, 0deg)); }
}

.levels-hero__decor--ruler { 
  width:200px; 
  height:28px; 
  top:8%; 
  left:6%; 
  --rotate: -10deg;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='60' viewBox='0 0 400 60'><rect x='0' y='0' width='400' height='60' rx='8' ry='8' fill='%23fde68a'/><g stroke='%23925f0e' stroke-width='2'><line x1='20' y1='10' x2='20' y2='50'/><line x1='40' y1='20' x2='40' y2='50'/><line x1='60' y1='20' x2='60' y2='50'/><line x1='80' y1='20' x2='80' y2='50'/><line x1='100' y1='10' x2='100' y2='50'/><line x1='120' y1='20' x2='120' y2='50'/><line x1='140' y1='20' x2='140' y2='50'/><line x1='160' y1='20' x2='160' y2='50'/><line x1='180' y1='10' x2='180' y2='50'/><line x1='200' y1='20' x2='200' y2='50'/><line x1='220' y1='20' x2='220' y2='50'/><line x1='240' y1='20' x2='240' y2='50'/><line x1='260' y1='10' x2='260' y2='50'/><line x1='280' y1='20' x2='280' y2='50'/><line x1='300' y1='20' x2='300' y2='50'/><line x1='320' y1='20' x2='320' y2='50'/><line x1='340' y1='10' x2='340' y2='50'/></g></svg>"); 
  animation-delay: 0s;
}

.levels-hero__decor--pen { 
  width:130px; 
  height:130px; 
  bottom:-10px; 
  right:6%; 
  --rotate: 15deg;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><g transform='translate(10,10)'><rect width='80' height='20' rx='6' ry='6' fill='%239ca3af' transform='rotate(45 40 10)'/><rect x='60' y='-5' width='30' height='30' rx='4' ry='4' fill='%2338bdf8' transform='rotate(45 75 10)'/><polygon points='95,10 120,0 110,25' fill='%230ea5e9'/></g></svg>"); 
  animation-delay: 1s;
}

.levels-hero__decor--pencil { 
  width:170px; 
  height:28px; 
  bottom:18%; 
  left:10%; 
  --rotate: -8deg;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='360' height='60' viewBox='0 0 360 60'><polygon points='0,30 40,10 40,50' fill='%23f59e0b'/><rect x='40' y='12' width='280' height='36' fill='%23fbbf24'/><rect x='80' y='12' width='200' height='36' fill='%23fde68a' opacity='0.35'/><rect x='320' y='12' width='20' height='36' fill='%233f3f46'/></svg>"); 
  animation-delay: 2s;
}

.levels-hero__decor--notebook { 
  width:140px; 
  height:180px; 
  top:35%; 
  left:0%; 
  --rotate: 5deg;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='180' height='240' viewBox='0 0 180 240'><rect x='10' y='10' width='160' height='220' rx='8' ry='8' fill='%23fef3c7' stroke='%23fbbf24' stroke-width='2'/><rect x='15' y='15' width='150' height='210' fill='%23fffbeb'/><line x1='15' y1='50' x2='165' y2='50' stroke='%23e0e7ff' stroke-width='1.5'/><line x1='15' y1='80' x2='165' y2='80' stroke='%23e0e7ff' stroke-width='1.5'/><line x1='15' y1='110' x2='165' y2='110' stroke='%23e0e7ff' stroke-width='1.5'/><line x1='15' y1='140' x2='165' y2='140' stroke='%23e0e7ff' stroke-width='1.5'/><line x1='15' y1='170' x2='165' y2='170' stroke='%23e0e7ff' stroke-width='1.5'/><line x1='15' y1='200' x2='165' y2='200' stroke='%23e0e7ff' stroke-width='1.5'/><circle cx='35' cy='30' r='5' fill='%23f59e0b'/><circle cx='35' cy='120' r='5' fill='%23f59e0b'/><circle cx='35' cy='210' r='5' fill='%23f59e0b'/></svg>"); 
  animation-delay: 1.5s;
  opacity: 0.7;
}

.levels-hero__decor--eraser { 
  width:80px; 
  height:40px; 
  top:5%; 
  right:2%; 
  --rotate: -15deg;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='60' viewBox='0 0 120 60'><rect x='10' y='15' width='100' height='30' rx='4' ry='4' fill='%23fecaca' stroke='%23dc2626' stroke-width='1.5'/><rect x='10' y='15' width='30' height='30' rx='4' ry='4' fill='%23fee2e2' opacity='0.8'/><line x1='40' y1='15' x2='40' y2='45' stroke='%23dc2626' stroke-width='1'/><line x1='70' y1='15' x2='70' y2='45' stroke='%23dc2626' stroke-width='1'/></svg>"); 
  animation-delay: 0.5s;
}

@media (max-width: 768px) {
  .levels-hero__decor--ruler { width: 140px; height: 20px; }
  .levels-hero__decor--pen { width: 90px; height: 90px; }
  .levels-hero__decor--pencil { width: 120px; height: 20px; }
  .levels-hero__decor--notebook { width: 100px; height: 130px; }
  .levels-hero__decor--eraser { width: 60px; height: 30px; }
}

.levels-hero__circle { 
  position:absolute; 
  width:11rem; 
  height:11rem; 
  border-radius:999px; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  font-weight:700; 
  color:#ffffff; 
  font-size: 0.9rem;
  letter-spacing:0.08em; 
  text-transform:uppercase; 
  box-shadow:0 28px 60px -28px rgba(15,23,42,0.35);
  transition: transform 0.3s ease;
  cursor: pointer;
}

.levels-hero__circle:hover {
  transform: scale(1.05);
}

.levels-hero__circle--primaire { 
  top:0; 
  left:12%; 
  background: linear-gradient(135deg,#f97316,#fb923c); 
  animation: pulse 3s ease-in-out infinite;
}

.levels-hero__circle--college { 
  top:40%; 
  right:14%; 
  background: linear-gradient(135deg,#38bdf8,#22d3ee);
  animation: pulse 3s ease-in-out infinite 1s;
}

.levels-hero__circle--lycee { 
  bottom:-10%; 
  left:30%; 
  width:9.5rem; 
  height:9.5rem; 
  background: linear-gradient(135deg,#6366f1,#a855f7);
  animation: pulse 3s ease-in-out infinite 2s;
}

@keyframes pulse {
  0%, 100% { box-shadow: 0 28px 60px -28px rgba(15,23,42,0.35); }
  50% { box-shadow: 0 28px 80px -20px rgba(15,23,42,0.5); }
}

@media (max-width: 960px) {
  .levels-hero__circle { width: 8rem; height: 8rem; font-size: 0.75rem; }
  .levels-hero__circle--lycee { width: 7rem; height: 7rem; }
}

.levels-hero__content {
  position: relative;
  z-index: 2;
}

.levels-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.3rem;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(99,102,241,0.15), rgba(59,130,246,0.15));
  border: 2px solid rgba(99,102,241,0.3);
  color: #4338ca;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 0.75rem;
  box-shadow: 0 4px 12px rgba(99,102,241,0.2);
}

.levels-hero__content h1 {
  font-size: clamp(1.8rem, 4vw, 2.8rem);
  line-height: 1.15;
  color: #0f172a;
  margin-top: 1.2rem;
  font-weight: 800;
}

.levels-hero__content p {
  margin-top: 1.2rem;
  font-size: 1.05rem;
  line-height: 1.7;
  color: #475569;
  max-width: 36rem;
}

.levels-cta {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1.8rem;
  padding: 0.85rem 1.8rem;
  border-radius: 999px;
  background: linear-gradient(135deg, #0ea5e9, #38bdf8);
  color: #ffffff;
  font-weight: 600;
  text-decoration: none;
  box-shadow: 0 20px 40px -20px rgba(14,165,233,0.5);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.levels-cta:hover {
  transform: translateY(-2px);
  box-shadow: 0 25px 50px -15px rgba(14,165,233,0.6);
}

.levels-grid { max-width:1140px; margin:0 auto; padding:0 1.5rem; display:grid; gap:1.75rem; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); }

.level-card { position:relative; padding:2.2rem 2rem; border-radius:2rem; color:#0f172a; overflow:hidden; box-shadow:0 28px 70px -32px rgba(15,23,42,0.35); min-height:21rem; display:flex; flex-direction:column; gap:1.5rem; }

.level-card::after { content:''; position:absolute; inset:auto 0 -60px 0; height:140px; background: linear-gradient(0deg, rgba(15,23,42,0.36) 0%, rgba(15,23,42,0) 100%); opacity:0.4; }

.level-card__header h2 { font-size:1.9rem; color:#ffffff; margin-bottom:0.75rem; text-shadow:0 1px 2px rgba(15,23,42,0.6); }
.level-card__header p { color: rgba(255,255,255,0.9); line-height:1.7; text-shadow:0 1px 1px rgba(15,23,42,0.5); }

.level-card__list { list-style:none; padding:0; margin:0; display:grid; gap:0.85rem; color: rgba(255,255,255,0.95); font-weight:500; }

.level-card__cta { margin-top:auto; align-self:flex-start; padding:0.6rem 1.5rem; border-radius:999px; background: rgba(255,255,255,0.22); color:#ffffff; text-decoration:none; font-weight:600; letter-spacing:0.04em; backdrop-filter: blur(6px); transition: background 0.3s ease, transform 0.3s ease; }

.level-card--primaire { background: linear-gradient(135deg,#f97316,#fb923c,#facc15); }
.level-card--college { background: linear-gradient(135deg,#38bdf8,#22d3ee,#0ea5e9); }
.level-card--lycee { background: linear-gradient(135deg,#6366f1,#a855f7,#ec4899); }

/* Enhanced search and filter styles */
.relative input[type="search"] {
  font-size: 1rem;
  font-weight: 500;
  border: 2px solid #e2e8f0;
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);
  transition: all 0.3s ease;
  background: #ffffff;
}

.relative input[type="search"]:focus {
  outline: none;
  border-color: #38bdf8;
  box-shadow: 0 8px 24px rgba(56, 189, 248, 0.15), 0 0 0 3px rgba(56, 189, 248, 0.1);
  transform: translateY(-2px);
}

.relative input[type="search"]::placeholder {
  color: #94a3b8;
  font-weight: 400;
}

/* Filter buttons with school theme */
button[class*="inline-flex"] {
  font-weight: 600;
  font-size: 0.95rem;
  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);
  transition: all 0.3s ease;
}

button[class*="inline-flex"]:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.12);
}

button[class*="bg-primary"] {
  background: linear-gradient(135deg, #0ea5e9, #38bdf8) !important;
  box-shadow: 0 4px 16px rgba(14, 165, 233, 0.3);
}

button[class*="bg-primary"]:hover {
  box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4);
}

/* Enhanced filter sections */
.max-w-7xl > div > .bg-white {
  box-shadow: 0 20px 50px -20px rgba(15, 23, 42, 0.15);
  border: 2px solid #f1f5f9;
  position: relative;
  overflow: visible;
}

.max-w-7xl > div > .bg-white::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #fbbf24 0%, #38bdf8 50%, #6366f1 100%);
  border-radius: 1.5rem 1.5rem 0 0;
}

/* Card hover effects enhanced */
article.group {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

article.group:hover {
  transform: translateY(-8px);
  box-shadow: 0 25px 50px -12px rgba(15, 23, 42, 0.25);
}

/* Enhanced empty state */
.empty-state-card {
  position: relative;
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 15%, #f9fafb 50%, #fff 100%);
  border: 2px dashed #fbbf24;
  border-radius: 2rem;
  padding: 4rem 2rem;
  text-align: center;
  overflow: hidden;
}

.empty-state-card::before {
  content: '';
  position: absolute;
  top: -100px;
  left: -100px;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%);
  border-radius: 50%;
  animation: float 8s ease-in-out infinite;
}

.empty-state-card::after {
  content: '';
  position: absolute;
  bottom: -80px;
  right: -80px;
  width: 160px;
  height: 160px;
  background: radial-gradient(circle, rgba(56, 189, 248, 0.1) 0%, transparent 70%);
  border-radius: 50%;
  animation: float 6s ease-in-out infinite reverse;
}

.empty-state-icon {
  position: relative;
  z-index: 1;
  margin: 0 auto;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #38bdf8, #6366f1);
  color: white;
  border-radius: 50%;
  box-shadow: 0 20px 40px -15px rgba(56, 189, 248, 0.4);
  animation: pulse 3s ease-in-out infinite;
}

.empty-state-decor {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.5);
  color: #94a3b8;
  border-radius: 50%;
  animation: float 4s ease-in-out infinite;
}

.empty-state-title {
  position: relative;
  z-index: 1;
  margin-top: 1.5rem;
  font-size: 1.5rem;
  font-weight: 700;
  color: #0f172a;
}

.empty-state-text {
  position: relative;
  z-index: 1;
  margin-top: 1rem;
  font-size: 1rem;
  color: #475569;
  max-width: 28rem;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.6;
}

.empty-state-button {
  position: relative;
  z-index: 1;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border-radius: 999px;
  background: linear-gradient(135deg, #0ea5e9, #38bdf8);
  color: #ffffff;
  font-weight: 600;
  border: none;
  box-shadow: 0 10px 25px -10px rgba(14, 165, 233, 0.5);
  transition: all 0.3s ease;
  cursor: pointer;
}

.empty-state-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 35px -10px rgba(14, 165, 233, 0.6);
}

/* Enhanced sidebar cards */
aside > div {
  transition: all 0.3s ease;
}

aside > div:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px -15px rgba(15, 23, 42, 0.2);
}

aside .bg-white {
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border: 2px solid #f1f5f9;
}

aside .bg-gradient-to-br {
  position: relative;
  overflow: hidden;
}

aside .bg-gradient-to-br::after {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: rotate 20s linear infinite;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Section headings */
section h2 {
  position: relative;
  display: inline-block;
}

section h2::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #38bdf8, #6366f1);
  border-radius: 2px;
}

/* Responsive improvements */
@media (max-width: 1024px) {
  .grid.grid-cols-1.lg\:grid-cols-\[minmax\(0\,3fr\)_minmax\(0\,1\.25fr\)\] {
    grid-template-columns: 1fr !important;
  }
  
  aside {
    margin-top: 2rem;
  }
}

@media (max-width: 1024px) {
  .site-header__inner {
    padding: 1rem 1.5rem;
    gap: 1.5rem;
  }

  .site-nav {
    gap: 1rem;
    max-width: 500px;
  }

  .site-nav__link {
    font-size: 0.9rem;
    padding: 0.5rem 0.85rem;
  }

  .site-actions {
    gap: 0.5rem;
  }

  .site-actions__link {
    font-size: 0.9rem;
    padding: 0.6rem 1.2rem;
  }

  .site-actions__cta {
    font-size: 0.9rem;
    padding: 0.65rem 1.5rem;
  }
}

@media (max-width: 768px) {
  .site-header__inner {
    flex-wrap: wrap;
    justify-content: space-between;
    padding: 1rem 1.25rem;
    gap: 1rem;
  }

  .site-logo {
    font-size: 1.5rem;
  }

  .site-nav {
    width: 100%;
    order: 3;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 100%;
    gap: 0.75rem;
  }

  .site-nav__link {
    font-size: 0.875rem;
    padding: 0.4rem 0.6rem;
  }

  .site-actions {
    order: 2;
  }

  .site-logo {
    font-size: 1.3rem;
  }
}

@media (max-width: 640px) {
  .relative input[type="search"] {
    font-size: 0.95rem;
    padding: 0.75rem 0.75rem 0.75rem 2.75rem;
  }
  
  button[class*="inline-flex"] {
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
  }
  
  .levels-hero {
    padding: 2rem 1rem;
  }
  
  .levels-hero__content h1 {
    font-size: 1.5rem;
  }
  
  .levels-hero__content p {
    font-size: 0.95rem;
  }
  
  .site-footer__inner {
    grid-template-columns: 1fr !important;
  }
  
  .site-footer__school-icons {
    justify-content: center;
  }
}


